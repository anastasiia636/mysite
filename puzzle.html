<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ó–∞–¥–∞–Ω–∏–µ: –°–æ–±–µ—Ä–∏ –¥–æ–º–∏–∫ ‚Äî –£—á–µ–±–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    /* ===== –°—Ç–∏–ª–∏ –¥–ª—è –ø–∞–∑–ª–∞ ===== */
    .puzzle-container {
      display: flex;
      gap: 40px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 30px 0;
    }

    .puzzle-area {
      width: 400px;
      height: 300px;
      border: 4px solid #e67e00;
      border-radius: 12px;
      background: #fff;
      position: relative;
      overflow: hidden;
    }

    .puzzle-area h3 {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      margin: 0;
      font-size: 14px;
      color: #666;
      font-style: italic;
    }

    /* –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–µ —Ñ–∏–≥—É—Ä—ã */
    .shape {
      position: absolute;
      cursor: grab;
      user-select: none;
      transition: box-shadow 0.2s;
    }

    .shape:active {
      cursor: grabbing;
    }

    .shape:hover {
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }

    /* –ë–∞–∑–æ–≤—ã–µ —Ñ–∏–≥—É—Ä—ã */
    .square {
      width: 80px;
      height: 80px;
      background: #e74c3c;
    }

    .triangle-roof {
      width: 0;
      height: 0;
      border-left: 50px solid transparent;
      border-right: 50px solid transparent;
      border-bottom: 60px solid #8b4513;
    }

    .triangle-tree-1 {
      width: 0;
      height: 0;
      border-left: 45px solid transparent;
      border-right: 45px solid transparent;
      border-bottom: 55px solid #228b22;
    }

    .triangle-tree-2 {
      width: 0;
      height: 0;
      border-left: 55px solid transparent;
      border-right: 55px solid transparent;
      border-bottom: 65px solid #2e8b2e;
    }

    .triangle-tree-3 {
      width: 0;
      height: 0;
      border-left: 65px solid transparent;
      border-right: 65px solid transparent;
      border-bottom: 70px solid #1e6b1e;
    }

    .rect-trunk {
      width: 20px;
      height: 35px;
      background: #8b4513;
    }

    .rect-window {
      width: 25px;
      height: 25px;
      background: #3498db;
      border: 2px solid #2980b9;
    }

    /* –ö–Ω–æ–ø–∫–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞ */
    .rotate-btn {
      position: absolute;
      top: -12px;
      right: -12px;
      width: 24px;
      height: 24px;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 50%;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .shape:hover .rotate-btn {
      opacity: 1;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–±–µ–¥—ã */
    @keyframes celebrate {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes confetti {
      0% { opacity: 1; transform: translateY(0) rotate(0deg); }
      100% { opacity: 0; transform: translateY(-100px) rotate(720deg); }
    }

    .puzzle-area.success {
      animation: celebrate 0.5s ease 3;
      border-color: #27ae60;
      box-shadow: 0 0 30px rgba(39, 174, 96, 0.5);
    }

    .success-message {
      display: none;
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #27ae60;
      color: #fff;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: bold;
      z-index: 100;
    }

    .puzzle-area.success .success-message {
      display: block;
      animation: celebrate 0.5s ease infinite;
    }

    /* –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ */
    .reset-btn {
      display: block;
      margin: 20px auto;
      padding: 12px 30px;
      background: #e67e00;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    .reset-btn:hover {
      background: #d35400;
    }
  </style>
</head>
<body>

<header class="site-header">
  <div class="container header-inner">
    <a href="index.html" class="logo">
      <div class="logo-shape"><span class="logo-text">WP</span></div>
      <span class="logo-title">WebPortal</span>
    </a>
    <nav class="main-nav">
      <ul>
        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="tasks.html">–ó–∞–¥–∞–Ω–∏—è</a></li>
        <li><a href="coursework.html">–ö—É—Ä—Å–æ–≤–∞—è</a></li>
        <li><a href="flex.html">Flexbox</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="site-main">
  <div class="container">
    <h1>–ó–∞–¥–∞–Ω–∏–µ: –°–æ–±–µ—Ä–∏ –¥–æ–º–∏–∫</h1>
    <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∏–≥—É—Ä—ã –∏ —Å–æ–±–µ—Ä–∏—Ç–µ –¥–æ–º–∏–∫ —Å —ë–ª–∫–æ–π. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üª —á—Ç–æ–±—ã –ø–æ–≤–µ—Ä–Ω—É—Ç—å —Ñ–∏–≥—É—Ä—É.</p>

    <div class="puzzle-container">
      <!-- –õ–µ–≤–∞—è –æ–±–ª–∞—Å—Ç—å - –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã -->
      <div class="puzzle-area" id="sourceArea">
        <h3>–°–æ–±—Ä–∞—Ç—å –¥–æ–º–∏–∫ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ</h3>

        <!-- –ö–≤–∞–¥—Ä–∞—Ç –¥–æ–º–∞ (–ø–æ–≤—ë—Ä–Ω—É—Ç –Ω–∞ 15¬∞) -->
        <div class="shape square" id="house" style="left: 30px; top: 120px; transform: rotate(15deg);" data-rotation="15">
          <button class="rotate-btn">‚Üª</button>
        </div>

        <!-- –ö—Ä—ã—à–∞ (—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, –ø–æ–≤—ë—Ä–Ω—É—Ç –Ω–∞ -10¬∞) -->
        <div class="shape triangle-roof" id="roof" style="left: 150px; top: 180px; transform: rotate(-10deg);" data-rotation="-10">
          <button class="rotate-btn">‚Üª</button>
        </div>

        <!-- –û–∫–Ω–æ -->
        <div class="shape rect-window" id="window" style="left: 300px; top: 200px; transform: rotate(25deg);" data-rotation="25">
          <button class="rotate-btn">‚Üª</button>
        </div>

        <!-- –Å–ª–∫–∞: 3 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ + —Å—Ç–≤–æ–ª -->
        <div class="shape triangle-tree-1" id="tree1" style="left: 120px; top: 50px; transform: rotate(8deg);" data-rotation="8">
          <button class="rotate-btn">‚Üª</button>
        </div>

        <div class="shape triangle-tree-2" id="tree2" style="left: 200px; top: 80px; transform: rotate(-12deg);" data-rotation="-12">
          <button class="rotate-btn">‚Üª</button>
        </div>

        <div class="shape triangle-tree-3" id="tree3" style="left: 50px; top: 200px; transform: rotate(5deg);" data-rotation="5">
          <button class="rotate-btn">‚Üª</button>
        </div>

        <div class="shape rect-trunk" id="trunk" style="left: 320px; top: 120px; transform: rotate(-20deg);" data-rotation="-20">
          <button class="rotate-btn">‚Üª</button>
        </div>

        <div class="success-message">üéâ –û—Ç–ª–∏—á–Ω–æ! –î–æ–º–∏–∫ —Å–æ–±—Ä–∞–Ω!</div>
      </div>

      <!-- –ü—Ä–∞–≤–∞—è –æ–±–ª–∞—Å—Ç—å - –ø—Ä–∏–º–µ—Ä -->
      <div class="puzzle-area" id="exampleArea" style="pointer-events: none; opacity: 0.7;">
        <h3>–°–æ–±—Ä–∞—Ç—å –¥–æ–º–∏–∫ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ</h3>
        <!-- –ü—Ä–∏–º–µ—Ä —Å–æ–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
        <div class="shape triangle-tree-1" style="left: 80px; top: 80px; transform: rotate(0deg);"></div>
        <div class="shape triangle-tree-2" style="left: 70px; top: 115px; transform: rotate(0deg);"></div>
        <div class="shape triangle-tree-3" style="left: 60px; top: 160px; transform: rotate(0deg);"></div>
        <div class="shape rect-trunk" style="left: 115px; top: 230px; transform: rotate(0deg);"></div>
        
        <div class="shape square" style="left: 260px; top: 180px; transform: rotate(0deg);"></div>
        <div class="shape triangle-roof" style="left: 250px; top: 125px; transform: rotate(0deg);"></div>
        <div class="shape rect-window" style="left: 287px; top: 207px; transform: rotate(0deg);"></div>
      </div>
    </div>

    <button class="reset-btn" id="resetBtn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
  </div>
</main>

<footer class="site-footer">
  <div class="container footer-inner">
    <p>&copy; 2025 –£—á–µ–±–Ω—ã–π –ø–æ—Ä—Ç–∞–ª. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </div>
</footer>

<script>
// ===== Drag & Drop –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫ =====

const shapes = document.querySelectorAll('#sourceArea .shape');
const sourceArea = document.getElementById('sourceArea');
let activeShape = null;
let offsetX = 0;
let offsetY = 0;

// –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
shapes.forEach(shape => {
  shape.addEventListener('mousedown', (e) => {
    if (e.target.classList.contains('rotate-btn')) return; // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ

    activeShape = shape;
    const rect = shape.getBoundingClientRect();
    offsetX = e.clientX - rect.left;
    offsetY = e.clientY - rect.top;
    
    shape.style.zIndex = 1000;
    shape.style.cursor = 'grabbing';
  });

  // –ü–æ–≤–æ—Ä–æ—Ç —Ñ–∏–≥—É—Ä—ã
  const rotateBtn = shape.querySelector('.rotate-btn');
  if (rotateBtn) {
    rotateBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      let currentRotation = parseInt(shape.dataset.rotation) || 0;
      currentRotation += 45; // –ü–æ–≤–æ—Ä–æ—Ç –Ω–∞ 45¬∞
      if (currentRotation >= 360) currentRotation -= 360;
      shape.dataset.rotation = currentRotation;
      shape.style.transform = `rotate(${currentRotation}deg)`;
      
      checkWin(); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ –ø–æ–≤–æ—Ä–æ—Ç–∞
    });
  }
});

// –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
document.addEventListener('mousemove', (e) => {
  if (!activeShape) return;

  const areaRect = sourceArea.getBoundingClientRect();
  let newX = e.clientX - areaRect.left - offsetX;
  let newY = e.clientY - areaRect.top - offsetY;

  // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –æ–±–ª–∞—Å—Ç–∏
  newX = Math.max(0, Math.min(newX, areaRect.width - activeShape.offsetWidth));
  newY = Math.max(0, Math.min(newY, areaRect.height - activeShape.offsetHeight));

  activeShape.style.left = newX + 'px';
  activeShape.style.top = newY + 'px';
});

// –ö–æ–Ω–µ—Ü –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
document.addEventListener('mouseup', () => {
  if (activeShape) {
    activeShape.style.zIndex = '';
    activeShape.style.cursor = 'grab';
    checkWin();
    activeShape = null;
  }
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è: –≤—Å–µ —Ñ–∏–≥—É—Ä—ã –ø–æ–≤—ë—Ä–Ω—É—Ç—ã –Ω–∞ 0¬∞ –∏–ª–∏ 360¬∞)
function checkWin() {
  let allCorrect = true;
  
  shapes.forEach(shape => {
    const rotation = parseInt(shape.dataset.rotation) || 0;
    // –°—á–∏—Ç–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –µ—Å–ª–∏ —É–≥–æ–ª 0¬∞ –∏–ª–∏ –∫—Ä–∞—Ç–µ–Ω 360¬∞
    if (rotation % 360 !== 0) {
      allCorrect = false;
    }
  });

  if (allCorrect) {
    sourceArea.classList.add('success');
  } else {
    sourceArea.classList.remove('success');
  }
}

// –°–±—Ä–æ—Å
document.getElementById('resetBtn').addEventListener('click', () => {
  // –ù–∞—á–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ —É–≥–ª—ã
  const initial = {
    house: { left: 30, top: 120, rot: 15 },
    roof: { left: 150, top: 180, rot: -10 },
    window: { left: 300, top: 200, rot: 25 },
    tree1: { left: 120, top: 50, rot: 8 },
    tree2: { left: 200, top: 80, rot: -12 },
    tree3: { left: 50, top: 200, rot: 5 },
    trunk: { left: 320, top: 120, rot: -20 }
  };

  for (const [id, pos] of Object.entries(initial)) {
    const el = document.getElementById(id);
    if (el) {
      el.style.left = pos.left + 'px';
      el.style.top = pos.top + 'px';
      el.style.transform = `rotate(${pos.rot}deg)`;
      el.dataset.rotation = pos.rot;
    }
  }

  sourceArea.classList.remove('success');
});
</script>

</body>
</html>